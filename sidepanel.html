<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tabs</title>
    <link rel="stylesheet" href="style.css" />
    <script type="module" src="js/main.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Header / Search (Arc-style command bar vibe) -->
        <header class="glass-header">
            <div class="search-container">
                <div class="header-row">
                    <div class="brand">
                        <img src="icons/logo.svg" class="brand-logo" alt="" />
                    </div>
                    <span id="current-window-label" class="current-window-label" title="Current window">W1</span>
                    <div class="header-actions">
                        <div class="search-input-wrap">
                            <input type="text" id="tab-search" class="search-bar" placeholder="Search tabs..." />
                            <button type="button" id="search-clear-btn" class="search-clear-btn hidden" title="Clear search" aria-label="Clear search">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                            </button>
                        </div>
                        <button id="settings-btn" class="icon-btn" title="Settings">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path
                                    d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                                </path>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="search-options-row">
                    <div class="visit-nav-arrows" title="Previous / Next tab (by viewing order)">
                        <button type="button" id="visit-prev-btn" class="visit-nav-btn" aria-label="Previous tab">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                        </button>
                        <button type="button" id="visit-next-btn" class="visit-nav-btn" aria-label="Next tab">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </button>
                    </div>
                    <label class="search-option-toggle" title="Back/forward arrows step through tabs in all windows (not just current)">
                        <input type="checkbox" id="visit-across-windows" />
                        <span>Nav across windows</span>
                    </label>
                    <label class="search-option-toggle" title="Search tabs in every window">
                        <input type="checkbox" id="search-all-windows" />
                        <span>All windows</span>
                    </label>
                    <label class="search-option-toggle" title="Include bookmarks in search (tabs shown first)">
                        <input type="checkbox" id="search-bookmarks" />
                        <span>Bookmarks</span>
                    </label>
                </div>
            </div>
        </header>

        <!-- Selection Toolbar (shown when tabs are selected) -->
        <div id="selection-toolbar" class="selection-toolbar hidden">
            <span id="selection-count" class="selection-count">0 selected</span>
            <div class="selection-actions">
                <button id="close-selected-btn" class="selection-btn" title="Close selected tabs">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                    Close
                </button>
                <button id="group-selected-btn" class="selection-btn" title="Group selected tabs">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    Group
                </button>
                <button id="clear-selection-btn" class="selection-btn" title="Clear selection">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="15" y1="9" x2="9" y2="15"></line>
                        <line x1="9" y1="9" x2="15" y2="15"></line>
                    </svg>
                    Clear
                </button>
            </div>
        </div>

        <!-- Tab Tree Container -->
        <main id="tabs-list" class="tabs-list">
            <!-- Tabs will be injected here by sidepanel.js -->
        </main>

        <div class="section-divider"></div>

        <section id="bookmarks-section" class="bookmarks-section">
            <div class="section-header">
                <div class="section-header-left">
                    <span>BOOKMARKS</span>
                </div>
                <div style="display: flex; gap: 8px; align-items: center">
                    <button id="refresh-bookmarks" class="icon-small" title="Refresh">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                    </button>
                    <button id="close-bookmarks" class="section-close-btn" title="Close">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="bookmarks-list" class="bookmarks-list">
                <!-- Bookmarks injected here -->
            </div>
        </section>

        <section id="downloads-section" class="bookmarks-section hidden">
            <div class="section-header">
                <div class="section-header-left">
                    <span>DOWNLOADS</span>
                </div>
                <input type="text" id="downloads-search" class="section-search-input"
                    placeholder="Search downloads..." />
                <div style="display: flex; gap: 8px; align-items: center">
                    <button id="refresh-downloads" class="icon-small" title="Refresh">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                    </button>
                    <button id="close-downloads" class="section-close-btn" title="Close">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="downloads-list" class="bookmarks-list">
                <!-- Downloads injected here -->
            </div>
        </section>

        <section id="groups-section" class="bookmarks-section hidden">
            <div class="section-header">
                <div class="section-header-left">
                    <span>TAB GROUPS</span>
                </div>
                <div style="display: flex; gap: 8px; align-items: center">
                    <button id="refresh-groups" class="icon-small" title="Refresh">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="23 4 23 10 17 10"></polyline>
                            <polyline points="1 20 1 14 7 14"></polyline>
                            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                        </svg>
                    </button>
                    <button id="close-groups" class="section-close-btn" title="Close">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="groups-list" class="bookmarks-list">
                <!-- Tab Groups injected here -->
            </div>
        </section>

        <!-- Color Picker Modal -->
        <div id="color-picker-modal" class="color-picker-modal hidden">
            <div class="color-picker-content">
                <div class="color-picker-header">
                    <h4>Choose Group Color</h4>
                    <button id="close-color-picker" class="icon-small">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="color-picker-grid" id="color-picker-grid">
                    <!-- Color options will be injected here -->
                </div>
            </div>
        </div>

        <!-- Footer (Optional controls) -->
        <!-- Settings Modal -->
        <div id="settings-modal" class="settings-modal hidden">
            <div class="settings-content">
                <div class="settings-header">
                    <h3>⚙️ Appearance</h3>
                    <button id="close-settings" class="icon-small">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>

                <div class="settings-section">
                    <div class="section-title">Color Scheme</div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <span>Mode</span>
                            <span class="setting-desc">Light, dark, or follow system</span>
                        </div>
                        <select id="color-scheme-select" class="scheme-select">
                            <option value="system">System</option>
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                </div>

                <div class="settings-divider"></div>

                <div class="settings-section">
                    <div class="section-title">AI Features <span class="beta-badge">Beta</span></div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <span>Enable AI Organize</span>
                            <span class="setting-desc">Group tabs by topic using AI (Smart Hybrid mode)</span>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="ai-enabled-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <span>
                                Grouping Threshold
                                <a href="https://shuknuk.github.io/zentreeTabs/docs/help.html#grouping-threshold" 
                                   target="_blank" 
                                   class="help-link" 
                                   title="Learn more about grouping threshold">
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="10"></circle>
                                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                                        <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                    </svg>
                                </a>
                            </span>
                            <span class="setting-desc">Minimum tabs per domain to auto-group (2-5)</span>
                        </div>
                        <select id="grouping-threshold-select" class="scheme-select">
                            <option value="2" selected>2+ tabs</option>
                            <option value="3">3+ tabs</option>
                            <option value="4">4+ tabs</option>
                            <option value="5">5+ tabs</option>
                        </select>
                    </div>
                </div>

                <div class="settings-divider"></div>

                <div class="settings-section">
                    <div class="section-title">Theme</div>
                    <div class="theme-selector">
                        <button class="theme-swatch active" data-theme="minimal-blue" title="Cream"
                            style="background: #a894c2">
                            <span class="theme-name">Cream</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-slate" title="Mist"
                            style="background: #8a9bb0">
                            <span class="theme-name">Mist</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-sage" title="Sage" style="background: #8bb68f">
                            <span class="theme-name">Sage</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-rose" title="Blush"
                            style="background: #d4949a">
                            <span class="theme-name">Blush</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-amber" title="Sand"
                            style="background: #d4a876">
                            <span class="theme-name">Sand</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-indigo" title="Lavender"
                            style="background: #a896cf">
                            <span class="theme-name">Lavender</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-teal" title="Seafoam"
                            style="background: #6fb8ab">
                            <span class="theme-name">Seafoam</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-charcoal" title="Stone"
                            style="background: #8a8480">
                            <span class="theme-name">Stone</span>
                        </button>
                        <button class="theme-swatch" data-theme="minimal-amoled" title="AMOLED"
                            style="background: #000000">
                            <span class="theme-name">AMOLED</span>
                        </button>
                    </div>
                </div>

                <div id="settings-version" class="settings-version" aria-label="Extension version"></div>
            </div>
        </div>

        <!-- Context Menu -->
    <div id="tab-context-menu" class="context-menu hidden">
        <div class="context-menu-item" id="ctx-new-child">New tab as child</div>
        <div class="context-menu-item" id="ctx-move-next-to-current">Move next to current tab</div>
        <div class="context-menu-item" id="ctx-make-child-of-current">Make child of current tab</div>
        <div class="context-menu-item" id="ctx-move-to-current-window">Move to current window</div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="ctx-duplicate">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
            </svg>
            Duplicate Tab
        </div>
        <div class="context-menu-item" id="ctx-reload">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
            Reload Tab
        </div>
        <div class="context-menu-item" id="ctx-mute">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                <line x1="23" y1="9" x2="17" y2="15"></line>
                <line x1="17" y1="9" x2="23" y2="15"></line>
            </svg>
            <span id="ctx-mute-text">Mute Tab</span>
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" id="ctx-rename">Change Name</div>
        <div class="context-menu-item" id="ctx-promote">Remove from Nested Head</div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item danger" id="ctx-close">Close Tab</div>
    </div>

    <!-- AI Progress Overlay -->
        <div id="ai-status" class="ai-status-overlay hidden">Ready</div>

        <!-- Footer (Optional controls) -->
        <footer class="glass-footer">
            <button id="ai-organize-btn" class="icon-btn ai-sparkle-btn" title="Smart Group AI (Beta)">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z">
                    </path>
                    <path d="M5 3v4"></path>
                    <path d="M19 17v4"></path>
                    <path d="M3 5h4"></path>
                    <path d="M17 19h4"></path>
                </svg>
                <span class="beta-indicator">β</span>
            </button>
            <button id="undo-ai-grouping-btn" class="icon-btn hidden" title="Undo AI Grouping">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 7v6h6"></path>
                    <path d="M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"></path>
                </svg>
            </button>
            <div style="flex-grow: 1"></div>
            <!-- Spacer -->
            <button id="toggle-bookmarks-btn" class="icon-btn" title="Toggle Bookmarks">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                </svg>
            </button>
            <button id="toggle-downloads-btn" class="icon-btn" title="Toggle Downloads">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                <span id="downloads-badge" class="icon-badge hidden">0</span>
            </button>
            <button id="toggle-groups-btn" class="icon-btn" title="Toggle Tab Groups">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="7" height="7"></rect>
                    <rect x="14" y="3" width="7" height="7"></rect>
                    <rect x="14" y="14" width="7" height="7"></rect>
                    <rect x="3" y="14" width="7" height="7"></rect>
                </svg>
            </button>
        </footer>
    </div>
</body>

</html>
